import os
import sys

name = "ProcessInterceptorDebug.txt"
text = "Redirected execution successfully"

#name = "EMP_Debug.out"
#text = "REWRITE"

def checkFile(fileName):
	datafile = file(fileName)
	for line in datafile:
		if text in line:
			return True

	return False;
		
numFoundFiles=0
numNotFoundFiles=0
numDir=0
curpath = os.path.dirname(__file__)
dirname = os.path.join(curpath,'../storage/analyses')

for x in os.listdir(dirname):
	tempDir = x
	tempDir = os.path.join(dirname,tempDir)
	#print tempDir
	foundFile=False
	for root,dirs,files in os.walk(tempDir):
		if name in files:
			fileName = os.path.join(root,name)
			foundFile = True
			if checkFile(fileName) == False:
				print "Failed to find data in file"
				print fileName
				numNotFoundFiles+=1
			else:
				print "Found in file"
				print fileName
				numFoundFiles+=1
		
	
	if foundFile == False:
		print "Failed to find file in directory:"
		print tempDir
		numDir+=1

print "Found In Files: " 
print numFoundFiles
print "Not Found in Files: " 
print numNotFoundFiles
print numDir
