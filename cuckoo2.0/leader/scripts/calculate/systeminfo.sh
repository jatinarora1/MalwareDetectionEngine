#!/bin/bash

PROCESSORNUM=0
PHYSICALNUM=0
CPUFREQUENCY=0
RAM=0
CACHE=0

echo "Retrieving information about the system (This may require authorization)"

#Relatively portable code to access system information on "Linux" systems
#Add new methods for fall back use

#Get CPU Processor numbers
PROCESSORNUM=$(grep "processor" /proc/cpuinfo |  wc -l)

#Get Physical Cores
PHYSICALNUM=$(grep "core id" /proc/cpuinfo | sort | uniq | wc -l)

#Get CPU Frequency
#CPUFREQUENCY=$(lshw -c cpu 2> /dev/null | grep capacity | sed 's/.*: //')
CPUFREQUENCY=$(sudo dmidecode -t processor | grep "Current Speed:" |  sed 's/.*: //')

#Get RAM in GB
PHYSICALMEMORY=$(PHYS=$(cat /proc/meminfo | grep "MemTotal:" | sed -e 's/MemTotal:       //' -e 's/ kB//') ; echo "$PHYS*0.000000954" | bc)

rm -f system_info.txt
printf "PROCESSOR_CORES: %s\n" "$PROCESSORNUM" >> system_info.txt
printf "PHYSICAL_CORES: %s\n" "$PHYSICALNUM" >> system_info.txt
printf "CPU_FREQUENCY: %s\n" "$CPUFREQUENCY" >> system_info.txt
printf "PHYSICAL_MEMORY: %s" "$PHYSICALMEMORY" >> system_info.txt
